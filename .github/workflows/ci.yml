name: CI

on:
  push:
    branches: [ main, development, staging, test, feature/*, fix/* ]
  pull_request:
    branches: [ main, development, staging, test ]

jobs:
  quality-checks:
    name: Quality Checks
    runs-on: ubuntu-latest

    steps:
    # Checkout repo
    - name: â¬‡ï¸ Checkout repo
      uses: actions/checkout@v4

    # Setup Node.js
    - name: â” Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 20

    # Setup pnpm
    - name: ğŸš€ Setup pnpm
      uses: pnpm/action-setup@v4

    # Cache pnpm store
    - name: ğŸ“¦ Cache pnpm store
      uses: actions/cache@v4
      with:
        path: ~/.pnpm-store
        key: pnpm-store-${{ hashFiles('pnpm-lock.yaml') }}
        restore-keys: |
          pnpm-store-

    # Install dependencies
    - name: ğŸ“¥ Install dependencies
      run: pnpm install

    # Build project
    - name: ğŸ—ï¸ Build Project
      run: pnpm build

    # Run Typescript type checking
    - name: ğŸ” Run Typescript type checking
      run: pnpm type-check

    # Run ESLint
    - name: ğŸ§‘â€ğŸ’» Run ESLint
      run: pnpm lint

    # Run Prettier Check
    - name: ğŸ“ Run Prettier Check
      run: pnpm format:check

    # Commitlint
    - name: âš™ï¸ Commitlint
      uses: wagoid/commitlint-github-action@v6
